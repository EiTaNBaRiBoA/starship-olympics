[gd_scene load_steps=10 format=3 uid="uid://ovcqd8vqj5i1"]

[ext_resource type="PackedScene" uid="uid://dmlwbymobhm0b" path="res://godot4/debug/TestChamber.tscn" id="1_gfqil"]
[ext_resource type="PackedScene" uid="uid://cgjeqx4n1ot0e" path="res://godot4/actors/ships/Ship.tscn" id="2_bhfha"]
[ext_resource type="Script" path="res://godot4/test/manual/TestDiamonds.gd" id="2_pen8y"]
[ext_resource type="PackedScene" uid="uid://d3d15u074tcak" path="res://actors/brains/PlayerBrain.tscn" id="3_x272x"]
[ext_resource type="PackedScene" uid="uid://u685qfrbxw4g" path="res://godot4/elements/treasures/Diamond.tscn" id="5_wkp48"]
[ext_resource type="PackedScene" uid="uid://g2t7ocoioic1" path="res://godot4/elements/treasures/BigDiamond.tscn" id="6_xtpgn"]
[ext_resource type="PackedScene" uid="uid://1jdlhqq8mf0c" path="res://godot4/elements/treasures/PhasingDiamond.tscn" id="7_0rc48"]

[sub_resource type="GDScript" id="GDScript_sy7cc"]
script/source = "extends \"res://addons/debugToolbox/Log.gd\"


func _ready():
	super._ready()
	Events.sth_collected.connect(_on_sth_collected)

func _on_sth_collected(collector, collectee):
	log_line(\"[b]%s[/b] collected [b]%s[/b] (%d points)\" % [collector.name, collectee.name, collectee.points])
"

[sub_resource type="GDScript" id="GDScript_dqhjw"]
script/source = "extends Timer

@export var period := 4

func _on_timeout():
	Events.beat.emit(period)
"

[node name="TestChamber" instance=ExtResource("1_gfqil")]
script = ExtResource("2_pen8y")

[node name="Log" parent="." index="4"]
script = SubResource("GDScript_sy7cc")

[node name="Ship" parent="." index="6" instance=ExtResource("2_bhfha")]
unique_name_in_owner = true

[node name="PlayerBrain" parent="Ship" index="12" instance=ExtResource("3_x272x")]

[node name="Diamond" parent="." index="7" instance=ExtResource("5_wkp48")]
position = Vector2(1000, -100)

[node name="Diamond2" parent="." index="8" instance=ExtResource("5_wkp48")]
position = Vector2(1000, 100)

[node name="Diamond3" parent="." index="9" instance=ExtResource("5_wkp48")]
position = Vector2(900, 0)

[node name="Diamond4" parent="." index="10" instance=ExtResource("5_wkp48")]
position = Vector2(1100, 6)

[node name="Diamond5" parent="." index="11" instance=ExtResource("5_wkp48")]
position = Vector2(1250, -5)

[node name="BigDiamond" parent="." index="12" instance=ExtResource("6_xtpgn")]
position = Vector2(550, 0)

[node name="TestBeat" type="Timer" parent="." index="13"]
wait_time = 0.5
autostart = true
script = SubResource("GDScript_dqhjw")

[node name="PhasingDiamond" parent="." index="14" instance=ExtResource("7_0rc48")]
position = Vector2(1300, -1300)

[node name="PhasingDiamond2" parent="." index="15" instance=ExtResource("7_0rc48")]
position = Vector2(1100, -1300)

[node name="PhasingDiamond3" parent="." index="16" instance=ExtResource("7_0rc48")]
position = Vector2(900, -1300)

[node name="PhasingDiamond4" parent="." index="17" instance=ExtResource("7_0rc48")]
position = Vector2(700, -1300)

[node name="PhasingDiamond5" parent="." index="18" instance=ExtResource("7_0rc48")]
position = Vector2(500, -1300)

[connection signal="timeout" from="TestBeat" to="TestBeat" method="_on_timeout"]
